# =============================================
# .htaccess - alexperdel.com
# =============================================

# Activar motor de reescritura
RewriteEngine On

# =============================================
# HTTPS y WWW (forzar sin www + https)
# =============================================
# Redirigir www a sin www
RewriteCond %{HTTP_HOST} ^www\.alexperdel\.com [NC]
RewriteRule ^(.*)$ https://alexperdel.com/$1 [L,R=301]

# Forzar HTTPS (descomenta si tienes SSL)
# RewriteCond %{HTTPS} off
# RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# =============================================
# REDIRECCIONES 301 - URLs antiguas (WordPress)
# =============================================

# Páginas de contacto antiguas
Redirect 301 /contact/ https://alexperdel.com/
Redirect 301 /contacto/ https://alexperdel.com/
Redirect 301 /en/contact/ https://alexperdel.com/

# Paginación antigua del blog
Redirect 301 /page/2/ https://alexperdel.com/
Redirect 301 /page/3/ https://alexperdel.com/
Redirect 301 /page/5/ https://alexperdel.com/

# Páginas de autor y perfil
Redirect 301 /author/alexperdel/ https://alexperdel.com/sobre-mi.html
Redirect 301 /alexperdel-desarrollo-web-y-marketing-digital/ https://alexperdel.com/sobre-mi.html

# Portfolio y proyectos en inglés
Redirect 301 /en/portfolio/ https://alexperdel.com/proyectos/
Redirect 301 /en/crecer-en-ingles/ https://alexperdel.com/proyectos/crecer-en-ingles.html
Redirect 301 /en/marketing-digital/ https://alexperdel.com/proyectos/gestion-proyectos-seo.html
Redirect 301 /en/seo/ https://alexperdel.com/proyectos/gestion-proyectos-seo.html

# Tags y journal
Redirect 301 /tag/technology/ https://alexperdel.com/
Redirect 301 /journal/ https://alexperdel.com/

# Limpiar parámetros de Elementor y lang
RewriteCond %{QUERY_STRING} ^elementor_library= [NC]
RewriteRule ^(.*)$ https://alexperdel.com/? [R=301,L]

RewriteCond %{QUERY_STRING} ^lang=en [NC]
RewriteRule ^(.*)$ https://alexperdel.com/? [R=301,L]

# =============================================
# SEGURIDAD
# =============================================
# Proteger archivos sensibles
<FilesMatch "^\.">
    Order allow,deny
    Deny from all
</FilesMatch>

# Desactivar listado de directorios
Options -Indexes

# =============================================
# CACHE (mejora velocidad)
# =============================================
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType image/jpg "access plus 1 year"
    ExpiresByType image/jpeg "access plus 1 year"
    ExpiresByType image/png "access plus 1 year"
    ExpiresByType image/svg+xml "access plus 1 year"
    ExpiresByType image/webp "access plus 1 year"
    ExpiresByType text/css "access plus 1 month"
    ExpiresByType application/javascript "access plus 1 month"
    ExpiresByType text/html "access plus 1 day"
</IfModule>

# Compresión GZIP
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/html text/css application/javascript application/json image/svg+xml
</IfModule>
